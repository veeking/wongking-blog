---
date: 2022-07-21
category:
  - æŠ€æœ¯
tag:
  - Rust
---

# Rust åŸºç¡€å­¦ä¹ å°è®°

### å­—ç¬¦ä¸²å®šä¹‰æ–¹æ³•

**str ä¸&str**  
**str**æ˜¯ `String` å’Œ `&str` çš„åº•å±‚æ•°æ®ç±»å‹ï¼ŒåŒæ—¶ä¹Ÿæ˜¯åŠ¨æ€ `DST(dynamically sized types)` unsized ç±»å‹ï¼Œæ— æ³•ç›´æ¥è¢«ä½¿ç”¨ã€‚åªèƒ½é€šè¿‡`&str`è¿›è¡Œå®šä¹‰æˆå›ºå®šæ ˆä¸Šçš„å¼•ç”¨ç±»å‹ä½¿ç”¨

```rust
let foo = "hello";
// å…¶ä¸­  "hello" å­—é¢é‡æœ¬èº«ç±»å‹å°±æ˜¯strï¼Œå°†"hello"èµ‹å€¼ç»™fooå…¶å®æ˜¯åˆ›å»ºä¸€ä¸ªæ ˆæ¥å°†æŒ‡é’ˆæŒ‡å‘å¯¹"hello"(str)åœ°å€çš„å¼•ç”¨ï¼Œæ‰€ä»¥fooå°±æ˜¯&strç±»å‹ã€‚
```

**&str ä¸ String**  
ä¸€èˆ¬æƒ…å†µä¸‹ï¼Œstr ç”¨äºå®šä¹‰ä¸å¯å˜çš„å­—ç¬¦ä¸²ç±»å‹ï¼Œæ¯”å¦‚å¯è¯»çš„ã€‚

```rust
let foo = "hello";
// &foo å¯ä»¥å˜æˆå¯å˜å­—ç¬¦ä¸²
```

è€Œ String åˆ™ç”¨äºå®šä¹‰å¯å˜çš„å­—ç¬¦ä¸²ç±»å‹ã€‚

```rust
let foo = String:from("hello");
// ç­‰äº let foo: String = String:from("hello");
// æˆ–è€…
let foo = "hello".to_string();
```

**char**
è¡¨ç¤ºå•ä¸ªå­—èŠ‚å­—ç¬¦ï¼Œå¤§å°ä¸º 4 ä¸ªå­—èŠ‚ï¼Œæ¯”å¦‚`let foo: char = "a";`

**&mut str æ˜¯å¦ç­‰äº &mut String ?**

```rust
fn main () {
  let mut str_a = String::from("hello"); // String
  let mut str_aa = "hello"; // &str

  let str_bb = &mut str_aa;
  let str_b = &mut str_a;
//   println!("{}, {}", str_b, str_bb);
  assert_eq!(str_b, str_bb); // ç»“æœæ˜¯ç›¸ç­‰çš„... å…·ä½“ä¸ºä»€ä¹ˆTODO
}
```

### å¼•ç”¨å’Œæ‰€æœ‰æƒ

1.   å®šä¹‰å¯å˜**mut**å˜é‡

```rust
let mut foo = String::from("haha");
// ä¼ é€’å’Œå£°æ˜éƒ½è¦æ ‡æ³¨mut
let a = helper(&mut s);
// ä¿®æ”¹ã€mutå¯å˜å¼•ç”¨å˜é‡ã€‘è¦åœ¨å‰é¢åŠ ä¸Š*å·
*a = String::from("+++fs");

fn bar(s: &mut String) -> &mut String {
    s
}
```

2.   å¼•ç”¨`&`ä¸è§£å¼•ç”¨`*`
åœ¨ Rust ä¸­ï¼Œ**å¼•ç”¨è¡¨ç¤ºå…è®¸ä½ ä½¿ç”¨å€¼ä½†ä¸è·å–å…¶æ‰€æœ‰æƒ**ã€‚  
åœ¨å¸¸è§„ä½œç”¨åŸŸä¸­ï¼Œåœ¨**å˜é‡å‰**åŠ ä¸Š`&`å³å¯å˜æˆå¼•ç”¨èµ‹å€¼ã€‚æ¯”å¦‚`let a = String::from("hello"); let b = &a;`  
åœ¨å‡½æ•°ä½œç”¨åŸŸä¸­ï¼Œåœ¨**å˜é‡ç±»å‹**åŠ ä¸Š`&`ç¬¦å³å¯ã€‚æ¯”å¦‚`fn foo(a: &String)`  

è€Œ`*`å·è¡¨ç¤º**æŒ‡å‘çš„å†…å­˜ä½ç½®ä¸Šå­˜å‚¨çš„å˜é‡çš„å€¼**ï¼Œå³æŒ‡å‘åŸå§‹å€¼ï¼Œä¹Ÿå«**è§£å¼•ç”¨ï¼ˆdereferencingï¼‰æ“ä½œç¬¦**ã€‚  
ç¤ºä¾‹ï¼š

```rust
// ç¤ºä¾‹1ï¼šé€šè¿‡*æ“ä½œç¬¦æ¥å®šä½åˆ°å†…å­˜åŸå§‹å€¼ä½ç½®ï¼Œå¹¶å°†åŸå§‹å€¼5ä¿®æ”¹ä¸º0
fn main() {
  let mut a: i32 = 5;
  let b = &mut a;
  *b = 0;
 println!("{}", a); // output: 0
}

// ç¤ºä¾‹2ï¼šå½“ä¸€ä¸ªå˜é‡ä½¿ç”¨äº†&è¿›è¡Œå¼•ç”¨åï¼Œå€¼ç±»å‹å°±å˜æˆäº†&[type]äº†ï¼Œè€Œå¦‚æœæƒ³è¦å˜å›çº¯ç²¹çš„typeï¼Œåˆ™éœ€è¦ä½¿ç”¨*å·è§£é™¤å¼•ç”¨ã€‚
fn main () {
  let a: i32 = 10;
  let b = &a;
  // æ­¤æ—¶bçš„ç±»å‹å› ä¸ºå¼•ç”¨å…³ç³»ï¼Œå˜æˆäº†&i32
  // æ‰€ä»¥a(i32)å’Œb(&i32)æ˜¯ä¸ç›¸ç­‰çš„
  assert_eq!(a, b);  // error: expected `i32`, found `&i32`
  // ä½†æ˜¯å¯ä»¥é€šè¿‡ä½¿ç”¨*å·æ¥è§£é™¤å¼•ç”¨ï¼Œä½¿å…¶æŒ‡å‘åŸå§‹å€¼
  assert_eq!(a, *b); // true
}
```

3.   å€Ÿç”¨
**å€Ÿç”¨(Borrowing)æŒ‡æ˜¯å¯¹å¼•ç”¨çš„ä¸€ç§è§„åˆ™çº¦æŸæµç¨‹ï¼Œéå…·ä½“ç±»å‹ã€‚**

åœ¨å‡½æ•°ä½œç”¨åŸŸä¸­ï¼Œå°†å¼•ç”¨å˜é‡ä½œä¸ºå®å‚ä¼ å…¥çš„è¿‡ç¨‹å°±å«å€Ÿç”¨ï¼Œå€Ÿç”¨çš„æ•°æ®ä¸å¯æ›´æ”¹ï¼Œå€Ÿç”¨åä¼šè¿˜å›æ¥ï¼Œä¸æ”¹å˜æ‰€æœ‰æƒã€‚(æœ‰å€Ÿæœ‰è¿˜ï¼Œå†å€Ÿä¸éš¾ ğŸ˜‚)ã€‚  
è€Œèƒ½ä½“ç°å€Ÿç”¨çš„åœºæ™¯å°±æ˜¯ï¼Œå‡½æ•°å¼•ç”¨å½¢å¼ä¼ å‚ï¼Œä¼ (å€Ÿ)è¿‡å»ï¼Œè°ƒç”¨(ä½¿ç”¨)å®Œæ¯•åï¼Œåè¿˜å›æ¥ã€‚  
ï¼ˆ\*æ³¨æ„ï¼šä½†æ˜¯å¦‚æœä¼ å…¥å’Œè®¾ç½®çš„æ˜¯&mut å¯å˜å¼•ç”¨ï¼Œé‚£ä¹ˆæ˜¯å…è®¸è¿›è¡Œä¿®æ”¹çš„ã€‚ï¼‰  
**ä»£ç ç¤ºä¾‹ï¼š**

```rust
// å¸¸è§„çš„å€Ÿç”¨ï¼Œé€šè¿‡&å°†å¼•ç”¨å€¼ä¼ é€’ï¼Œä¸è½¬ç§»æ‰€æœ‰æƒï¼Œåœ¨å‡½æ•°è°ƒç”¨ç»“æŸåä¼šè‡ªåŠ¨å°†å¼•ç”¨å€¼å½’è¿˜
fn main () {
	let v = vec![10,20,30]; // å£°æ˜ä¸€ä¸ªæ•°ç»„ï¼Œå˜é‡ v å…·æœ‰æ•°æ®çš„æ‰€æœ‰æƒ
	print_vector(&v); // æŠŠvå€Ÿç»™print_vectorå‡½æ•°(ä½œç”¨åŸŸ)
	println!("{:?}", v); // print_vectorå‡½æ•°(ä½œç”¨åŸŸ)ä½¿ç”¨å®Œæ¯•ï¼Œè‡ªåŠ¨å½’è¿˜ï¼Œè¾“å‡º: [10,20,30]
}
// print_vectorå€Ÿè¿‡æ¥æ”¹äº†åˆ«å
fn print_vector(x: &Vec<i32>) {
    // å¼€å§‹æ“ä½œå€Ÿè¿‡æ¥çš„ä¸œè¥¿
	println!("borrow of moved values: {}", x);
}


// éå¸¸è§„çš„å€Ÿç”¨ ï¼ˆä¸æ¨èï¼‰
fn main () {
	let mut v = vec![10,20,30]; // å£°æ˜ä¸€ä¸ªæ•°ç»„ï¼Œå˜é‡ v å…·æœ‰æ•°æ®çš„æ‰€æœ‰æƒ
	v = print_vector(v); // væ‰€æœ‰æƒè½¬ç§»ç»™print_vectoræ–¹æ³•
	println!("{:?}", v); // [10,20,30]
}
fn print_vector(x: Vec<i32>) -> Vec<i32> {
	 x // è¿”å›
}
```

4.   å¯å˜å¼•ç”¨
å†™æ³•ï¼š**&mut å˜é‡å**

- ä¸€ä¸ªä½œç”¨åŸŸä¸‹ä¸€ä¸ªå˜é‡å¯¹è±¡åªèƒ½æœ‰ä¸€ä¸ªå¯å˜å¼•ç”¨ï¼Œé˜²æ­¢æ•°æ®ç«äº‰é€ æˆçš„é€»è¾‘é”™ä¹±é—®é¢˜ã€‚

```rust
fn main () {
  let mut a = String::from("hello");
  let b = &mut a;
  let c = &mut a;
  // error: cannot borrow `a` as mutable more than once at a time
  println!("b value: {}, c value: {}", b, c);
}
```

- å¯å˜å¼•ç”¨ä¸ä¸å¯å˜å¼•ç”¨ä¸èƒ½åŒæ—¶å­˜åœ¨

```rust
fn main () {
  let mut a = String::from("hello");
  let b = &a;
  let c = &a;
  let d = &mut a;
  // æ‰“å°æŠ¥é”™ï¼šcannot borrow `a` as mutable because it is also borrowed as immutable
  // åŸå› æ˜¯å› ä¸º bå’Œcå·²ç»å°†&aä½œä¸ºä¸å¯å˜å¼•ç”¨äº†ï¼Œdå°±æ— æ³•å†å°†å…¶å˜ä¸ºå¯å˜çš„å¼•ç”¨äº†ã€‚ï¼ˆä½ è·Ÿåˆ«äººå…±äº«çš„ä¸œè¥¿ï¼Œä½ è‚¯å®šä¸å¸Œæœ›è¿™ä¸ªä¸œè¥¿è¢«å…¶ä»–äººå æœ‰ä¿®æ”¹å§~ğŸ¸ï¼‰
  println!("b value: {}, c value: {}, d value: {}", b, c, d);
}
```

### ç±»å®šä¹‰

`struct` å®šä¹‰ç±»çš„æˆå‘˜å¯¹è±¡
`impl` å®šä¹‰ç±»çš„æˆå‘˜æ–¹æ³•
<!-- ![Alt text](./1667061429088.png) -->

![å›¾ 3](/assets/posts/6cc6c7bab3889b5e285779d6f8b7ef99f75db20a3f081d84d1de06b0dfdc54ae.png)  



é™æ€ç±»æ–¹æ³•ï¼Œå‚æ•°é‡Œä¸æºå¸¦`&self`

```
struct Foo {
  y: u32
}

impl Foo {
  fn static_fn (x: u32) -> u32 {
    x
  }
}
```

å…ƒç¥–å’Œæšä¸¾æ–¹å¼ä¹Ÿèƒ½å®šä¹‰æˆç»“æ„ä½“
æ¥å£(ç‰¹å¾(trait))ä¸ç»“æ„ä½“

```
// æ¥å£
trait Bar {
  fn static_fn(&self) -> u32;
}
// ç±»
struct Foo {
  y: u32
}

// ä¸ºç±»å®ç°æ¥å£
impl Bar for Foo {
  fn static_fn(&self) -> u32 {
	self.y
  }
}

fn main () {
  let foo = Foo { y: 30 };
  println!("foo.y is {}", foo.static_fn());
}
```

ç»“æ„ä½“åŒæ—¶ä¹Ÿå…·æœ‰æ‰€æœ‰æƒè½¬ç§»ç‰¹å¾

### match åŒ¹é…

`match`æœ‰ç‚¹ç±»ä¼¼`switch`ï¼Œéƒ½æ˜¯æ ¹æ®å½“å‰å€¼åŒ¹é…çš„è¡¨è¾¾å¼è¿›è¡Œç›¸å…³çš„æ“ä½œ
match xx {
pattern: do something
pattern2: do something
}

### æ•°ç»„ã€åŠ¨æ€æ•°ç»„å’Œåˆ‡ç‰‡

1. **æ•°ç»„ Array**
æ™®é€šæ•°ç»„æ˜¯**å›ºå®šé•¿åº¦**ï¼Œä¸€ç»„ç›¸åŒæ•°æ®ç±»å‹å…ƒç´ ç»„æˆçš„é›†åˆã€‚

```rust
let array: [i32; 3] = [1, 2, 3];
// or
let array = [1, 2, 3];
array.push(4); // error: å›ºå®šæ•°ç»„ä¸å…è®¸åŠ¨æ€æ·»åŠ å…ƒç´ 
println!("{:?}", array );
// æ™®é€šæ•°ç»„çš„é•¿åº¦æ˜¯å›ºå®šçš„ï¼Œå­˜åœ¨æ ˆ(stack)å†…å­˜ä¸­
|-----|
| 1     |
| ----- |
| 2     |
| ----- |
| 3     |
| ----- |
```

2.**åŠ¨æ€æ•°ç»„ Vectors**
åº•å±‚ä¹Ÿæ˜¯æ•°ç»„ï¼Œå¤šäº†å¼•ç”¨æŒ‡é’ˆæ¥åŠ¨æ€åˆ›å»ºæ–°çš„æ•°ç»„ã€‚  
æœ¬è´¨ä¸ŠåŠ¨æ€æ•°ç»„å°†æ•°ç»„çš„æ‰€æœ‰å…ƒç´ å­˜å‚¨åœ¨å †å†…å­˜ä¸­ã€‚å½“å¢åŠ æ–°å…ƒç´ æ—¶ï¼Œ åŠ¨æ€æ•°ç»„ä¼šæ£€æŸ¥æ•°ç»„æ˜¯å¦è¿˜æœ‰å‰©ä½™ç©ºé—´ï¼Œå¦‚æœæ²¡æœ‰ï¼ŒåŠ¨æ€æ•°ç»„ä¼šé‡æ–°ç”Ÿæˆä¸€ä¸ªæ›´å¤§çš„æ•°ç»„ï¼Œå¤åˆ¶æ‰€æœ‰çš„å…ƒç´ åˆ°æ–°æ•°ç»„å¹¶é‡Šæ”¾ä¹‹å‰çš„æ•°ç»„ç©ºé—´ã€‚  

```rust
// ä¼ ç»Ÿå®ä¾‹åŒ–åŠ¨æ€æ•°ç»„
let mut v: Vec<i32> = Vec::new();
v.push(1);
v.push(2);
v.push(3);
v.push(4);

// ä½¿ç”¨vec!å®å¿«æ·åˆ›å»ºåŠ¨æ€æ•°ç»„ï¼Œå¯ä»¥å¾ˆæ–¹ä¾¿è®¾ç½®åˆå§‹æ•°æ®
let mut v: Vec<i32> = vec![1, 2, 3];
v.push(4); // å¯ä»¥ä»»æ„æ·»åŠ å…ƒç´ 
println!("{:?}", v);
```

3. **åˆ‡ç‰‡ Slices**
åˆ‡ç‰‡é¡¾åæ€ä¹‰ï¼Œå¯ä»¥çœ‹æˆæ˜¯æ•°ç»„æˆ–è€…åŠ¨æ€æ•°ç»„åˆ‡ï¼ˆæˆªå–ï¼‰å‡ºæ¥çš„ä¸€ä¸ªç‰‡æ®µã€‚åˆ‡ç‰‡çš„å…ƒç´ ä¿ç•™ä¸åŸå§‹å…ƒç´ ç±»å‹ä¸€è‡´çš„ä½¿ç”¨æ–¹æ³•ï¼Œä¸”ä¸æŒæœ‰æ‰€æœ‰æƒã€‚

```
// æ•°ç»„åˆ‡ç‰‡
fn main () {
  let array: [i32; 3] = [1, 2, 3];
  let s = &array;
  println!("{:?}", s);
}
// åŠ¨æ€æ•°ç»„åˆ‡ç‰‡
fn main () {
  let mut v: Vec<i32> = vec![1, 2, 3];
  let sv = &mut v;
  sv.push(1);
  println!("{:?}", sv);
}
```

**æ•°ç»„å’Œåˆ‡ç‰‡ç›¸å…³ç­”ç–‘ï¼š** 

åˆ‡ç‰‡çš„ä½¿ç”¨åœºæ™¯æ˜¯ä»€ä¹ˆ?
1.   å¸Œæœ›æ“ä½œä¿®æ”¹æ•°ç»„å…ƒç´ ä½†æ˜¯åˆä¸å¸Œæœ›åŸå§‹æ•°æ®å‘ç”Ÿæ”¹å˜ï¼Œå¯ä»¥ç”¨åˆ‡ç‰‡åˆ‡å‡ºæ¥å•ç‹¬æ“ä½œã€‚

åˆ‡ç‰‡ä¸åŠ¨æ€æ•°ç»„ä½¿ç”¨åœºæ™¯ä¼šé‡å å—ï¼Ÿ
1.   éœ€è¦å°ç‰‡æ®µçš„æ—¶å€™ï¼Œä¸ä¼šï¼Œåˆ‡ç‰‡åªæ˜¯å¯¹åŸå§‹æ•°æ®ç‰‡æ®µçš„æˆªå–ã€‚

æ•°ç»„æœ‰æ²¡æœ‰å…¶å®ƒä¾¿æ·çš„è¯­æ³•ç³–ï¼ˆæˆ–è€…å®ï¼Ÿï¼‰ç›®å‰åªçŸ¥é“ iter()

éå† iter()  
é•¿åº¦ len()  
å…‹éš† clone()  
æˆªå– splice()  

åœ¨ Rust ä¸­æƒ³è¦å®ç°è·Ÿ js ä¸€æ ·æ‹¿åˆ°éå†ç´¢å¼•çš„è¯ï¼Œéœ€è¦ enumerate()æ¥å°†å…ƒç´ æ‹†åˆ†æˆå…ƒç»„ï¼Œé‡Œé¢åŒ…å«ç´¢å¼•(ç´¢å¼•æ˜¯ usize ç±»å‹)å…ƒç´ 

```rust
fn main () {
 let v: Vec<i32> = vec![1, 2, 3];
 for (index, &item) in v.iter().enumerate() {
    println!("index: {}, item: {}", index, item);
 }
}
```

### å†…ç½®è¿ç®—æ–¹æ³•

1.   min/maxï¼Œ `val.min()`
2.   roundï¼Œ`val.round()`
3.   floorï¼Œæµ®ç‚¹æ•°å‘ä¸‹å–æ•´
4.   ceil
5.   abs
6.   truncï¼Œ è¿”å›æµ®ç‚¹æ•°çš„æ•´æ•°éƒ¨åˆ†ï¼Œæ¯”å¦‚ 1.2ï¼Œæ‹¿åˆ° 1
7.   fractï¼Œ è¿”å›æµ®ç‚¹æ•°çš„å°æ•°éƒ¨åˆ†ï¼Œæ¯”å¦‚ 1.2ï¼Œæ‹¿åˆ°çº¦ç­‰äº 0.2ã€‚`(1.2f64).fract()`
8.   å¦‚æœæƒ³è¦æŒ‡å®šç‰¹å®šå°æ•°ä½æ•°çš„æ•°ï¼Œéœ€è¦ç»“åˆ trunc+fract æ¥è‡ªå·±å®ç°ä¸€ä¸ª round_fixed æ–¹æ³•è·å–ï¼Œæ²¡æœ‰å†…ç½®å·¥å…·æ–¹æ³•ï¼Œåªæœ‰è¾“å‡ºæ‰“å°æ—¶å¯ä»¥ä½¿ç”¨`println!("{:.2}"}`æ¥æŒ‡å®šè¾“å‡ºå°æ•°ä½æ•°å€¼ã€‚

### æ³¨æ„ç‚¹

1.   åœ¨ Rust ä¸­ï¼ˆæ‰€æœ‰é™æ€è¯­è¨€ï¼‰ï¼Œä½¿ç”¨é™¤æ³•æ˜¯ä¼šé»˜è®¤è¿›è¡Œå‘ä¸‹å–æ•´çš„ã€‚å¦‚æœå¸Œæœ›ä¿ç•™å°æ•°ç‚¹ï¼Œé‚£ä¹ˆéœ€è¦ä½¿ç”¨`æ–­è¨€`æ ‡æ³¨

```rust
fn main () {
  let a = 10;
  let b = 3;
  let result = a as f64 / b as f64
  println!("integer division: {}", result )
}
```

2.   æ•´å½¢å’Œæµ®ç‚¹å‹ç›¸åŠ 

```rust
fn main () {
  let a: u32 = 4;
  let b: f64 = 2.5;
  let result = a as f64 + b;
  println!("result: {}", result);
}
```

### æ¨¡å—ç³»ç»Ÿ

åœ¨`Rust`ä¸­ï¼Œç¨‹åºé¡¹ç›®åˆ†ä¸º`å¯è¿è¡Œï¼ˆäºŒè¿›åˆ¶crateï¼‰`å’Œ`åº“ï¼ˆåº“crateï¼‰`ä¸¤ç§ç±»å‹ã€‚

#### lib åº“æ¨¡å—ç³»ç»Ÿ

**åˆå§‹åŒ–åˆ›å»º**
åˆå§‹åŒ–åˆ›å»º`åº“`é¡¹ç›®ï¼š`cargo new --lib testlib`ï¼Œåˆ›å»ºå®Œåä¼šåœ¨`src`ç›®å½•é‡Œå‘æ”¾ç½®`lib.rs`æ ¹æ¨¡å—æ–‡ä»¶ï¼Œ**ç”¨äºå£°æ˜æ¨¡å—çš„å¯¼å…¥å’Œå¯¼å‡º**ã€‚

```rust
[package]
name = "testlib"
version = "0.1.0"
edition = "2021"

// è¿™é‡Œå¯ä»¥è®¾ç½®åˆ«å
// [lib]
// name = "aliaselib"
```

**æ¨¡å—çš„ç»„ç»‡ç»“æ„**
åŒæ¨¡å—åç§°çš„æ–‡ä»¶ å°±è‡ªåŠ¨å¼•å…¥  
åŒæ¨¡å¿«çš„ç›®å½• ä½†æ˜¯æ²¡æœ‰æ¨¡å—åç§°çš„æ–‡ä»¶ï¼Œ å°±é€€å›è‡ªåŠ¨å¼•å…¥ mod.rs æ–‡ä»¶ ã€‚  
æ¨¡å—ä½œä¸ºç›®å½•çš„æ—¶å€™ï¼Œæ¨¡å—ç›®å½•ä¸‹å¿…é¡»è¦æœ‰ä¸€ä¸ª mod.rsï¼Œå‘ŠçŸ¥ rust è¿™æ˜¯ä¸ªæ¨¡å—ç›®å½•ï¼Œmod.rs ä¹Ÿå¯ä»¥å®šä¹‰å…¶å®ƒæ¨¡å—ã€‚  
éç›®å½•çš„åŒ–ï¼Œé‚£ä¹ˆç›´æ¥å®šä¹‰æ–‡ä»¶åï¼ˆæ–‡ä»¶å = æ¨¡å—åï¼‰å°±ä¼šè¢«è§†ä¸ºæ¨¡å—ã€‚  

æ¨èä½¿ç”¨ç›®å½•æ–¹å¼ é¿å…æ”¹åŠ¨é¢‘ç¹ ä¹Ÿå°±æ˜¯ `mod/mod.rs`or`mod/mod.rs mod2.rs` æ–¹å¼  
ç»„ç»‡ç»“æ„å›¾ç¤ºä¾‹ï¼š  

<!-- ![Alt text](./1668415170244.png) -->

![å›¾ 2](/assets/posts/8626b920bb2558f5af44875298b98620cc2042d7ba314e8730c936dbe02591f2.png)  


**ä½œç”¨åŸŸ**  
ç¡®ä¿å‘½åç©ºé—´ç‹¬ç«‹å”¯ä¸€ ï¼Œå¦åˆ™ä¼˜å…ˆæ‰¾è°å‘¢ï¼ŸåŒåæƒ…å†µä¸‹~ï¼  
é»˜è®¤ç§æœ‰åªèƒ½åœ¨åŒä¸€ä¸ª `mod` ä¸‹ä½¿ç”¨  

#### è¿è¡Œåº“(main)æ¨¡å—ç³»ç»Ÿ

**åˆå§‹åŒ–åˆ›å»º**  
åˆå§‹åŒ–åˆ›å»º`å¯è¿è¡Œ`é¡¹ç›®ï¼š`cargo new --bin test`ï¼Œåˆ›å»ºå®Œåä¼šåœ¨`src`ç›®å½•é‡Œå‘æ”¾ç½®`main.rs`æ ¹æ¨¡å—æ–‡ä»¶ï¼Œ**ç”¨äºä½œä¸ºè¿è¡Œç¨‹åºçš„ä¸»å…¥å£**ã€‚

åœ¨`Cargo.toml`é‡Œå¼•å…¥è‡ªå®šä¹‰åº“æ¨¡å—ä¾èµ–

```rust
[dependencies]
testlib = "1.0.0" # crates.ioåŒ…
testlib = { git = "https://github.com/rust-lang-nursery/rand" } # è¿œç¨‹ä»“åº“
testlib = { path = "../testlib" } # pathåœ¨æœ¬åœ°è°ƒè¯•å…è®¸ä½¿ç”¨ç»å¯¹è·¯å¾„
```

åœ¨`main.rs`é‡Œä½¿ç”¨`testlib`åº“æ¨¡å—

```rust
// ä½¿ç”¨åŒä¸ªé¡¹ç›®çš„æ¨¡å—ï¼Œä¸éœ€è¦externå’Œcrateå…³é”®å­—
mod module;
// ä½¿ç”¨externæ¥å¼•å…¥ä¾èµ–åŒ…
extern crate testlib;

fn main() {
  testlib::test();
  testlib::mpdtest();
}
```

ä½¿ç”¨`use`å…³é”®å­—æ¥å°†å‘½åç©ºé—´åŠ å…¥åˆ°å½“å‰ scope ä½œç”¨åŸŸï¼Œæ–¹ä¾¿å¿«æ·è°ƒç”¨è¯¥ä½œç”¨åŸŸä¸‹çš„æ–¹æ³•ï¼Œé¿å…æ¯æ¬¡é¢å¤–ä¹¦å†™ä½œç”¨åŸŸåã€‚

```rust
extern crate testlib;

use testlib::test;
// å¦‚æœå­˜åœ¨åŒåå‘½åç©ºé—´ å¯ä»¥ä½¿ç”¨aså…³é”®å­—æ¥å–åˆ«å
use testlib2::test as aliase_test;
// è¿˜å¯ä»¥é…åˆ{}è¯­æ³•ä¸€æ¬¡æ€§å¼•å…¥å¤šä¸ª
use testlib::{test, test2};
// ç”šè‡³è¿˜èƒ½*å·å¼•å…¥å…¨éƒ¨
use testlib::*

fn main() {
  test();
  // aliase_test();
}
```

**å…¶å®ƒç›¸å…³å…³é”®å­—ï¼š**  
`super`è¡¨ç¤ºçˆ¶æ ¹çº§æ¨¡å—ï¼Œç”¨åœ¨åŒæ¨¡å—ä½œç”¨åŸŸé‡Œå­æ¨¡å—å¼•ç”¨å¤–éƒ¨çˆ¶æ¨¡å—çš„æ–¹æ³•æ—¶ã€‚
`self` è¡¨ç¤ºè‡ªèº«æ¨¡å—

é—®é¢˜ï¼š

[æ–‡ä»¶æˆ–ç›®å½•åŒåæƒ…å†µä¸‹å¼•å…¥ä¼˜å…ˆçº§ï¼Ÿ](https://blog.csdn.net/cacique111/article/details/126430863)

- as åˆ«åå¼•ç”¨

### ç–‘æƒ‘

1. {:?} æ˜¯ä»€ä¹ˆï¼Ÿ éå†æ‰“å° ç»“æ„ä½“ or æ•°ç»„ï¼Œéœ€è¦é…åˆ#[derive(Debug)]ä½¿ç”¨
2. Typscript é‡Œçš„ interface æ¥å£ç›¸å½“äº Rust é‡Œçš„`struct(çº¦æŸå±æ€§) + traitï¼ˆçº¦æŸæ–¹æ³•ï¼‰`å— ï¼Ÿ
3. unwrap æ˜¯ä»€ä¹ˆï¼Ÿè¡¨ç¤ºå¤„ç†æ­£ç¡®çš„ match çš„æ–­è¨€ï¼Ÿ
4. ç±»å‹ä¸ŠåŠ ä¸Š&çš„æ„ä¹‰æ˜¯ä»€ä¹ˆï¼Ÿè¡¨ç¤ºå¼•ç”¨ + å…·ä½“ç±»å‹ = å¼•ç”¨ç±»å‹ï¼Ÿæˆ–è€…æ˜¯å€Ÿç”¨ç±»å‹ï¼Ÿ

### ç»ƒä¹ é¡¹ç›®

1.   è§†é¢‘è§£ç å™¨ï¼Ÿ
2.   ç”»å¸ƒæ¸²æŸ“å™¨ï¼Ÿ
3.   éŸ³é¢‘è§£ç å™¨

### ç›¸å…³å‚è€ƒ

1. [Rust ä¸­çš„ String å’Œ &str](https://blog.csdn.net/quicmous/article/details/118220399)

2. [Rust å…¥é—¨ç³»åˆ—ä¹‹å¼•ç”¨å’Œå€Ÿç”¨](https://segmentfault.com/a/1190000041364649)

3. [Sized å’Œä¸å®šé•¿ç±»å‹ DST](https://course.rs/advance/into-types/sized.html#%E5%8A%A8%E6%80%81%E5%A4%A7%E5%B0%8F%E7%B1%BB%E5%9E%8B-dst)

4. [Rust è¯­è¨€åŸºç¡€å­¦ä¹ : Rust ä¸­çš„å­—ç¬¦ä¸²](https://blog.frognew.com/2020/07/rust-strings.html)

5. [å‰–æ Rust ä¸­çš„ str å’Œ String ä¹‹é—´çš„åŒºåˆ«ä¸å…±æ€§](https://hyiker.com/2021/03/05/%E5%89%96%E6%9E%90Rust%E4%B8%AD%E7%9A%84str%E5%92%8CString%E4%B9%8B%E9%97%B4%E7%9A%84%E5%8C%BA%E5%88%AB%E4%B8%8E%E5%85%B1%E6%80%A7/)

6. [Dividing two integers doesn't print as a decimal number in Rust](https://stackoverflow.com/questions/35097710/dividing-two-integers-doesnt-print-as-a-decimal-number-in-rust)

7. æ•°ç»„ã€åŠ¨æ€æ•°ç»„ã€åˆ‡ç‰‡ï¼š
   - [æ•°ç»„ã€åŠ¨æ€æ•°ç»„ã€åˆ‡ç‰‡åœ¨ Rust ä¸­çš„åº”ç”¨](http://aqrun.oicnp.com/2020/10/25/array-vector-slice-in-rust.html)
   - [What are the differences between &[T] and Vec\<T\>?](https://stackoverflow.com/questions/57848114/what-are-the-differences-between-and-vec)

8. Rust åŸºç¡€æ•™ç¨‹ï¼š
   1. [ç®€å•æ•™ç¨‹](https://www.twle.cn/c/yufei/rust/rust-basic-index.html)
   2. [é€šè¿‡ä¾‹å­å­¦ä¹  Rustï¼ˆæ¨èï¼‰](https://rustwiki.org/zh-CN/rust-by-example/)
   3. [Rust è¯­è¨€åœ£ç»ï¼ˆä¸å¤ªæ¨èï¼Œè®²å¤æ‚äº†ï¼Œä¹ é¢˜ä¹Ÿæ˜¯è¶…çº²ï¼‰](https://course.rs/)

9. [Rust æ¨¡å—ç³»ç»Ÿ](https://magiclen.org/rust-module/)

